# Instrument Statuses

Статусы инструмента — это **обязательный атрибут** в **Instrument Registry**. 
Они определяют как долгосрочный жизненный цикл актива (наличие на бирже), так и его текущую доступность для торговли.

Все сервисы (от **Feed Adaptor** до **Unified Stream Provider**) должны обращаться к Registry, чтобы определить, как обрабатывать тики для данного инструмента.

## 1. Instrument Existence Status

Эти статусы определяют место инструмента в **жизненном цикле (Lifecycle)** и являются относительно **статичными** (меняются редко).

| Статус (UL) | Описание | Следствие для Системы |
| :--- | :--- | :--- |
| **LISTED / ACTIVE** | Инструмент допущен к торгам. Активно поддерживается биржей. | **Feed Adaptor** должен быть подписан на поток данных. |
| **PRE\_LISTED / PENDING** | Инструмент анонсирован, но торги по нему еще не начались (например, новый листинг монеты или старт фьючерса). | **Feed Adaptor** *может* быть подписан для приема первичных данных (стакан может быть пуст). |
| **DELISTED / REMOVED** | Инструмент полностью удален с биржи. | **Feed Adaptor** должен отключиться от потока. **Historical Data Service** переводит данные в режим "только чтение" (архив). |
| **EXPIRED** | Актуально только для **срочных** контрактов (фьючерсов, опционов). Контракт достиг даты экспирации и был рассчитан (settled). | Идентично `DELISTED` для торговых систем, но имеет финансовый смысл (расчет). |

## 2. Trading Status

Эти статусы **динамические** (могут меняться много раз в течение дня) и сообщают о текущем разрешении на исполнение ордеров. `Feed Adaptor` и `Ingestor` обязаны транслировать эти изменения.

| Статус (UL) | Описание | Применение |
| :--- | :--- | :--- |
| **TRADING / OPEN** | Нормальный режим работы. Ордера принимаются и исполняются. | Все системы работают в штатном режиме. |
| **HALT / SUSPENDED** | Торги временно приостановлены биржей. Причины: экстремальная волатильность, технические проблемы или регуляторные объявления. | **Strategy Engine** не должен отправлять новые ордера. Отправка ордеров вызовет ошибку. |
| **POST\_ONLY** | Разрешены только лимитные ордера (Maker). Маркет-ордера и немедленное исполнение (Taker) запрещены. | Используется для "медленного" открытия рынка или для сбора ликвидности. |
| **BREAK** | Короткий технический перерыв (характерно для традиционных рынков, но может встречаться и в крипто-фьючерсах). | **Feed Ingestor** должен ожидать восстановления потока. |

## 3. Internal System Status

Эти статусы вводятся нашей системой для управления рисками и тестовыми средами, независимо от биржи.

| Статус (UL) | Описание | Ответственный сервис |
| :--- | :--- | :--- |
| **BLOCKED / BLACKLISTED** | Инструмент технически активен на бирже, но заблокирован нашим **Risk Monitor** или **Compliance Service** из-за высокого риска или внутренних ограничений. | **Strategy Engine** и **Order Management System** должны игнорировать этот инструмент. |
| **TEST / MOCK** | Используется только в тестовых средах. Может иметь синтетические данные. | Всегда должен быть отключен в **Production**. |
