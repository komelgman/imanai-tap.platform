## ADR-0001: –í—ã–±–æ—Ä C—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ Microservice Stack

**–î–∞—Ç–∞:** 16.11.2025

**–°—Ç–∞—Ç—É—Å:** –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ

### 1. –ö–æ–Ω—Ç–µ–∫—Å—Ç (Context)

–ú—ã ‚Äî —Å—Ç–∞—Ä—Ç–∞–ø –Ω–∞ —Ä–∞–Ω–Ω–µ–π —Å—Ç–∞–¥–∏–∏. –ù–∞—à–∞ –æ—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî **–±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–∏–ø–æ—Ç–µ–∑ (Time-to-Market)**. –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ
–∏–º–µ–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö DevOps-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤. –í—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π, —á—Ç–æ–±—ã –ª—é–±–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–≥
–∑–∞–ø—É—Å—Ç–∏—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å—é —Å–∏—Å—Ç–µ–º—É –ª–æ–∫–∞–ª—å–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—è **Docker Compose**. –ü—Ä–∏ —ç—Ç–æ–º –º—ã —Ö–æ—Ç–∏–º —Å—Ä–∞–∑—É –∑–∞–ª–æ–∂–∏—Ç—å
–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (Service Discovery, Centralized Config), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Ä–æ—Å—Ç–∞ "–º–æ–Ω–æ–ª–∏—Ç–∞" –∏ —É–ø—Ä–æ—Å—Ç–∏—Ç—å
–±—É–¥—É—â—É—é –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ –±–æ–ª–µ–µ –∑—Ä–µ–ª—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, Kubernetes).

### 2. –†–µ—à–µ–Ω–∏–µ (Decision)

–ú—ã –ø—Ä–∏–Ω–∏–º–∞–µ–º —Ä–µ—à–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π" –Ω–∞–±–æ—Ä **Spring Cloud** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –Ω–∞—à–µ–π "–º–∏–Ω–∏-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã", —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –≤
–≤–∏–¥–µ –æ–±—ã—á–Ω—ã—Ö Spring Boot-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:

1. **Service Discovery:** `Spring Cloud Netflix Eureka`
2. **Centralized Configuration:** `Spring Cloud Config Server` (—Å Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±—ç–∫–µ–Ω–¥–∞)
3. **API Gateway:** `Spring Cloud Gateway`

–≠—Ç–∏ —Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–∞ –±—É–¥—É—Ç –∑–∞–ø—É—â–µ–Ω—ã –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ `docker-compose.yml` –≤–º–µ—Å—Ç–µ —Å –Ω–∞—à–∏–º–∏ –±–∏–∑–Ω–µ—Å-–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏.

### 3. –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ (Rationale)

* **–ù–∏–∑–∫–∏–π –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞:** –≠—Ç–æ "–ø—Ä–æ—Å—Ç–æ" –µ—â–µ —Ç—Ä–∏ Spring Boot-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏, –∑–Ω–∞–∫–æ–º—ã–µ —Å–æ Spring, –º–æ–≥—É—Ç
  –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —ç—Ç—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–µ–∑ –∑–Ω–∞–Ω–∏–π Kubernetes, Consul –∏–ª–∏ Istio.
* **–°–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å:** –°—Ç–µ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ "–æ–±–ª–∞—á–Ω—ã–µ" –ø–∞—Ç—Ç–µ—Ä–Ω—ã (—Ä–æ—É—Ç–∏–Ω–≥,
  –¥–∏—Å–∫–∞–≤–µ—Ä–∏, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è) "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" –∏ –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ `docker-compose`.
* **–ò–¥–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`Gateway`, `Config`, `Eureka`) —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –±–µ—Å—à–æ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º.
  –ù–∞–ø—Ä–∏–º–µ—Ä, `Spring Cloud Gateway` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Eureka` –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –Ω–∏–∂–µ—Å—Ç–æ—è—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.
* **–ë–µ—Å—à–æ–≤–Ω—ã–π –ø—É—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:** –ú—ã "–∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ–º" –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏. –ù–∞—à–∏ –±–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å—ã –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç
  –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `@EnableDiscoveryClient`) –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã. –í –±—É–¥—É—â–µ–º –º—ã —Å–º–æ–∂–µ–º –∑–∞–º–µ–Ω–∏—Ç—å *—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é* (
  Eureka, Config Server) –Ω–∞ K8s-–∞–Ω–∞–ª–æ–≥–∏, **–Ω–µ –º–µ–Ω—è—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É**.

### 4. –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è (Consequences)

* **–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ:**
    * –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥—ã.
    * –í—Å—è —Å–∏—Å—Ç–µ–º–∞ –ª–µ–≥–∫–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π (`docker-compose up`).
    * –ï–¥–∏–Ω—ã–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (Java/Spring) –¥–ª—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.
    * –ú—ã –∏–∑–±–µ–≥–∞–µ–º "–∂–µ—Å—Ç–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–∏" (hardcoding) IP-–∞–¥—Ä–µ—Å–æ–≤ –∏ –ø–æ—Ä—Ç–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥–∞—Ö.
* **–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ (—É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Ä–∏—Å–∫–∏):**
    * **–†–µ—Å—É—Ä—Å—ã:** –¢—Ä–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö JVM-–ø—Ä–æ—Ü–µ—Å—Å–∞ (Eureka, Config, Gateway) –±—É–¥—É—Ç –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –ø–∞–º—è—Ç—å, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å
      –∑–∞–º–µ—Ç–Ω–æ –Ω–∞ —Å–ª–∞–±—ã—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω–∞—Ö.
    * **–ó–æ–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:** –ú—ã —Å–∞–º–∏ –æ—Ç–≤–µ—á–∞–µ–º –∑–∞ –∑–∞–ø—É—Å–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç—Ç–∏—Ö "–∏–Ω—Ñ—Ä–∞-—Å–µ—Ä–≤–∏—Å–æ–≤".
    * **High-Load:** –≠—Ç–æ—Ç —Å—Ç–µ–∫ –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç K8s + Service Mesh. –≠—Ç–æ
      —Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –≤ –ø–æ–ª—å–∑—É —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ.

### 5. –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

#### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ 1: Kubernetes (K8s)

* **–û–ø–∏—Å–∞–Ω–∏–µ:** –°—Ä–∞–∑—É –Ω–∞—á–∞—Ç—å —Å "–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π" –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã: K8s-–∫–ª–∞—Å—Ç–µ—Ä, Ingress Controller (Nginx), Service Mesh (
  Istio/Linkerd).
* **–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–∞–∑–∞:** **–ß—Ä–µ–∑–º–µ—Ä–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å (Overkill)**. –≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π DevOps-–∫–æ–º–∞–Ω–¥—ã, —Å–ª–æ–∂–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  CI/CD –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–º. –≠—Ç–æ –ø—Ä—è–º–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –Ω–∞—à–µ–π —Ü–µ–ª–∏ "–±—ã—Å—Ç—Ä—ã–π
  Time-to-Market".

#### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ 2: –ú–æ–Ω–æ–ª–∏—Ç

* **–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–∞–ø–∏—Å–∞—Ç—å –≤—Å–µ –≤ –æ–¥–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
* **–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–∞–∑–∞:** –ú—ã —Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ –≤—ã–±–∏—Ä–∞–µ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –≤ –±—É–¥—É—â–µ–º.
  –ú–æ–Ω–æ–ª–∏—Ç –±—ã—Å—Ç—Ä–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ "–±–æ–ª—å—à–æ–º—É –∫–æ–º–∫—É –≥—Ä—è–∑–∏" (Big Ball of Mud) –∏ –∑–∞–º–µ–¥–ª–∏—Ç –Ω–∞—Å –≤ —Å—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ.

#### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ 3: Docker Compose + Hardcode

* **–û–ø–∏—Å–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `docker-compose`, –Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –∏–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –ø–æ—Ä—Ç—ã –≤ `application.yml` –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.
* **–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–∞–∑–∞:** –ù–µ–≥–∏–±–∫–æ. –ü–æ—Ä–æ–∂–¥–∞–µ—Ç —Ö–∞–æ—Å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö. –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ
  –∏–Ω—Å—Ç–∞–Ω—Å–∞ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏–¥–µ—Ç—Å—è –ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏ –≤—Ä—É—á–Ω—É—é.

---

### 6. –ü–ª–∞–Ω –ú–∏–≥—Ä–∞—Ü–∏–∏ (Migration Plan) –ø—Ä–∏ –†–æ—Å—Ç–µ

–ö–æ–≥–¥–∞ –º—ã –Ω–∞–π–º–µ–º DevOps-–∫–æ–º–∞–Ω–¥—É –∏ –±—É–¥–µ–º –≥–æ—Ç–æ–≤—ã –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ **Kubernetes**, –Ω–∞—à –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

| –ó–∞–¥–∞—á–∞                | üèÅ **–¢–µ–∫—É—â–µ–µ –†–µ—à–µ–Ω–∏–µ (Spring Cloud)** | üöÄ **–ë—É–¥—É—â–µ–µ –†–µ—à–µ–Ω–∏–µ (Kubernetes)**               |
|:----------------------|:--------------------------------------|:--------------------------------------------------|
| **Service Discovery** | `Spring Cloud Netflix Eureka`         | **K8s DNS** (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π) + `Service`              |
| **Configuration**     | `Spring Cloud Config Server`          | **K8s ConfigMaps** & **Secrets**                  |
| **API Gateway**       | `Spring Cloud Gateway` (JVM)          | **Infra-level Ingress** (Nginx, Traefik, Contour) |
| **Resilience**        | `Resilience4j` (–≤ –∫–æ–¥–µ)               | **Service Mesh** (Istio/Linkerd) (–ø—Ä–æ–∑—Ä–∞—á–Ω–æ)      |

**–®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (–ø–æ—Å–µ—Ä–≤–∏—Å–Ω–æ):**

1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `spring-cloud-starter-kubernetes-config`. –û–Ω–∞ –Ω–∞—É—á–∏—Ç Spring Boot —á–∏—Ç–∞—Ç—å
   `ConfigMaps`. –û—Ç–∫–ª—é—á–∞–µ–º `Config Server`.
2. **Service Discovery:** –ó–∞–º–µ–Ω—è–µ–º `spring-cloud-starter-netflix-eureka` –Ω–∞ `spring-cloud-starter-kubernetes-discovery`.
   K8s –±—É–¥–µ—Ç —Ä—É–ª–∏—Ç—å –¥–∏—Å–∫–∞–≤–µ—Ä–∏ —á–µ—Ä–µ–∑ DNS.
3. **Gateway:** "–í—ã–Ω–æ—Å–∏–º" `Spring Cloud Gateway` –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ –∑–∞–º–µ–Ω—è–µ–º –µ–≥–æ –Ω–∞ Ingress Controller, –∫–æ—Ç–æ—Ä—ã–π
   —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ L7-–ø—Ä–æ–∫—Å–∏ (Go/Nginx).

**–ö–ª—é—á–µ–≤–æ–π –≤—ã–≤–æ–¥:** –ù–∞—à–∏ –±–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å—ã (`user-service`, `order-service` –∏ —Ç.–¥.) –ø–æ—Ç—Ä–µ–±—É—é—Ç **–º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π** –≤
–∫–æ–¥–µ. –ú—ã –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ–Ω—è–µ–º "–∞–¥–∞–ø—Ç–µ—Ä—ã" Spring Cloud –Ω–∞ K8s-–Ω–∞—Ç–∏–≤–Ω—ã–µ.
